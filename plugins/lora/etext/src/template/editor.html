<div id="{uid}" class="etext-editor bd-round-3 width-{editor_width} {editor_additional_classes}" 
    style="background: {editor_background}; border: {editor_border_color}; color: {editor_text_color};">

        <!-- ETEXT Dialog Hidden-->
        <div id="dialog-{uid}" class="etext-dialog display-0">
            <div class="dialog-panel content-right pd-2">
                <i onClick="$('#dialog-{uid}').hide(200)" class="fa fa-window-close header-3 cursor-point"></i>
            </div>
            <div class="dialog-header header-2 t-bolder pdy-2 content-center">{header}</div>
            <div class="dialog-body pd-2 display-flex column-justify-center"></div>
        </div>

        <!-- ETEXT PopUp window hidden-->
        <div id="popup-{uid}" class="display-0 bd-bottom-dark bgr-dark-2 bd-1 pd-1">
            
        </div>
        
        <!-- ETEXT Panel -->
        <div class="panel pd-1 bd-round-top-3" style="background: {editor_panel_background};">
            <div class="row cols-auto">
                <!-- Block TEXT BASE -->
                <div class="column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-text"></i> Základní úprava</div>
                        <button type="button" id="bold" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-bold"></i></button>
                        <button type="button" id="italic" editor-target="editor-{uid}" copy-attr="bold:class" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-italic"></i></button>
                        <button type="button" id="strike" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-strikethrough"></i></button>
                        <button type="button" id="underline" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-underline"></i></button>
                        <button type="button" id="link" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-link"></i></button>
                    </div>
                </div>

                <!-- Block TEXT COLOR -->
                <div class="display-{display_text_color} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-palette"></i> Text</div>
                        <input type="color" id="dialog-text-color-input" editor-target="editor-{uid}" class="bd-round-3 bd-dark-3 bd-5 pd-0 cursor-point">
                        <button type="button" id="dialog-text-color" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Block BACKGROUND TEXT COLOR -->
                <div class="display-{display_background_color} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-fill-drip"></i> Pozadí</div>
                        <input type="color" id="dialog-text-bcolor-input" editor-target="editor-{uid}" class="bd-round-3 bd-dark-3 bd-5 pd-0 cursor-point">
                        <button type="button" id="dialog-text-bcolor" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Block TEXT SIZES + HEADERS -->
                <div class="display-{display_text_size} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-text-height"></i> Velikost textu</div>
                        <select id="etext-resize-text-input" class="bd-none pd-1 pdx-4 bgr-dark-3">
                        <optgroup label="Velikosti">
                            <option value="size-10px">10px</option>
                            <option value="size-12px">12px</option>
                            <option value="size-14px">14px</option>
                            <option value="size-16px" class="t-bold t-info" selected>16px</option>
                            <option value="size-18px">18px</option>
                            <option value="size-20px">20px</option>
                            <option value="size-22px">22px</option>
                            <option value="size-24px">24px</option>
                            <option value="size-26px">26px</option>
                            <option value="size-28px">28px</option>
                            <option value="size-30px">30px</option>
                        </optgroup>
                        <optgroup label="Nadpisy">
                            <option value="header-1">Nadpis 1</option>
                            <option value="header-2">Nadpis 2</option>
                            <option value="header-3">Nadpis 3</option>
                            <option value="header-4">Nadpis 4</option>
                            <option value="header-5">Nadpis 5</option>
                            <option value="header-6">Nadpis 6</option>
                        </optgroup>
                        </select>
                        <button type="button" id="resize-text" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Block LISTS -->
                <div class="display-{display_list} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-list"></i> Odrážky</div>
                        <select id="etext-list-selector" class="bd-none pd-1 pdx-4 bgr-dark-3 cursor-point">
                            <optgroup label="Odrážky">
                                <option value="ul:circle">Kruh</option>
                                <option value="ul:disc" selected>Disk</option>
                                <option value="ul:square">Čtverec</option>
                            </optgroup>
                            <optgroup label="Číslice">
                                <option value="ol:armenian">arm</option>
                                <option value="ol:decimal">dec</option>
                                <option value="ol:georgian">geor</option>
                                <option value="ol:lower-alpha">l-alpha</option>
                                <option value="ol:lower-greek">l-greek</option>
                                <option value="ol:lower-latin">l-latin</option>
                                <option value="ol:lower-roman">l-roman</option>
                                <option value="ol:upper-alpha">u-alpha</option>
                                <option value="ol:upper-latin">u-latin</option>
                                <option value="ol:upper-roman"> u-roman</option>
                                <option value="ol:inherit">inh</option>

                            </optgroup>
                        </select>
                        <button type="button" id="etext-insert-list" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Block IMAGE -->
                <div class="display-{display_image} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-image"></i> Obrázek</div>
                        <input type="text" id="image-url-input" editor-target="editor-{uid}" class="bgr-dark-3 cursor-point" placeholder="URL Obrázku ..">
                        <select id="etext-image-data-scale" class="bgr-dark-3 bd-none cursor-point pd-1">
                            <optgroup label="Šířka obrázku">
                                <option value="10">10%</option>
                                <option value="15">15%</option>
                                <option value="25">25%</option>
                                <option value="50">50%</option>
                                <option value="60">60%</option>
                                <option value="75">75%</option>
                                <option value="80">80%</option>
                                <option value="100" selected>100%</option>
                            </optgroup>
                        </select>
                        <button type="button" id="etext-insert-image" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-images"></i></button> 
                    </div>                   
                </div>

                

                <!-- Block ALIGNMENT -->
                <div class="display-{display_alignment} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-align-center"></i> Zarovnání</div>

                        <button type="button" id="align-left" class="button button-dark-3 bd-2 bd-round-3"><i class="fa fa-align-left"></i></button>
                        <button type="button" id="align-center" class="button button-dark-3 bd-2 bd-round-3"><i class="fa fa-align-center"></i></button>
                        <button type="button" id="align-right" class="button button-dark-3 bd-2 bd-round-3"><i class="fa fa-align-right"></i></button>
                        <button type="button" id="align-justify" class="button button-dark-3 bd-2 bd-round-3"><i class="fa fa-align-justify"></i></button>
                    </div>
                </div>

                <!-- Block ROWS + COLUMNS -->
                <div class="display-{display_table} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-border-all"></i> Tabulka</div>
                        <input type="number" id="etext-rows-input" class="width-72p bgr-dark-3" min="0" placeholder="Řádky">
                        <input type="number" id="etext-cols-input"class="width-72p bgr-dark-3" min="0" placeholder="Buňky">
                        
                        <select id="etext-table-width" class="bd-none pd-1 pdx-4 bgr-dark-3">
                            <optgroup label="Šířka">
                                <option value="10">10%</option>
                                <option value="20">20%</option>
                                <option value="25">25%</option>
                                <option value="30">30%</option>
                                <option value="40">40%</option>
                                <option value="50">50%</option>
                                <option value="60">60%</option>
                                <option value="75">75%</option>
                                <option value="80">80%</option>
                                <option value="90">90%</option>
                                <option value="100" selected>100%</option>
                            </optgroup>
                        </select>
                        <select id="etext-table-style" class="bd-none pd-1 pdx-4 bgr-dark-3">
                            <optgroup label="Styl">
                                <option class="bgr-default" value="default" selected>Výchozí</option>
                                <option class="bgr-dark" value="dark">Tmavý</option>
                                <option class="bgr-dark" value="dark row-filled">Tmavý-vyplněný</option>
                                <option class="bgr-light" value="light">Světlý</option>
                                <option class="bgr-light" value="light row-filled">Světlý-vyplněný</option>
                                <option class="bgr-info" value="info">Světle modrý</option>
                                <option class="bgr-info" value="info row-filled">Světle modrý-vyplněný</option>
                                <option class="bgr-success" value="success">Světle Zelený</option>
                                <option class="bgr-success" value="success row-filled">Světle Zelený-vyplněný</option>
                                <option class="bgr-warning" value="warning">Oranžový</option>
                                <option class="bgr-warning" value="warning row-filled">Oranžový-vyplněný</option>
                                <option class="bgr-error" value="error">Červený</option>
                                <option class="bgr-error" value="error row-filled">Červený-vyplněný</option>
                            </optgroup>
                        </select>
                        <button title="Vložit tabulku (Pokud jsou hodnoty prázdné - rozměr: 2x2)" type="button" id="etext-insert-row" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Block BLOCK + SPANS STYLES -->
                <div class="display-{display_style} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div class="subheader-3 t-light pdy-1"><i class="fa fa-border-style"></i> Styly</div>
                        <select id="etext-styles-input" editor-target="editor-{uid}" class="bd-none pd-1 pdx-4 bgr-dark-3">
                        <optgroup id="etext-style-divs" editor-target="editor-{uid}" label="DIV">
                            <option value="block:default" selected>Výchozí</option>
                        </optgroup>
                        <optgroup id="etext-style-spans" editor-target="editor-{uid}" label="SPAN">
                            <option value="span:default">Výchozí</option>
                        </optgroup>
                        </select>
                        <button type="button" id="etext-change-style" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- FONT ICONS -->
                <div class="display-{display_icons} column-shrink pd-1">
                    <div class="bd-left-light bd-2 pdx-2">
                        <div title="Lze použít pouze FREE ikony verze 5.15.4" class="subheader-3 t-light pdy-1 cursor-help"><i class="fa fa-icons"></i> Ikony</div>
                        <input type="text" id="etext-icon-input" editor-target="editor-{uid}" class="bd-dark-3 bgr-dark-3 bd-5 pd-0" placeholder="fa fa-icon" value="fa fa-">
                        <button type="button" id="etext-icon-button" editor-target="editor-{uid}" class="button button-dark-3 bd-dark-3 bd-2 bd-round-3"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- EXTEX editable content -->
        <div id="editor-{field_name}" validation="required" class="e-editor pd-2 bgr-light height-{editor_height} v-resy overflow-auto" contenteditable="true" target="editor-{uid}" style="user-select: all;">{content}</div>
        <textarea type="text" id="{field_name}" class="display-{debug} editor-content width-100 height-128p" name="{field_name}" target="editor-{uid}">{blocked_content}</textarea>
        <!-- ETEXT Footer -->
        <div class="etext-footer pd-2">

            <!-- Block COUNTER CHARS -->
            <div class="">
                <div class="row cols-auto">
                    <div class="column">
                        <span class="display-{debug}">ID: {uid}</span>
                    </div>

                    <div class="column content-right">
                        <i id="toggleEditorBgr" target="editor-{uid}" title="Aktuální počet napsaných znaků" class="fa fa-adjust mgx-2 cursor-point t-info"></i>
                        <i class="fa fa-pen mgx-2"></i><span title="Aktuální počet napsaných znaků" id="count-chars-editor" target="editor-{uid}" class="cursor-help">0</span>
                        <i class="fa fa-upload mgx-2"></i><span title="Aktuální počet znaků pro upload" id="count-chars" target="editor-{uid}" class="cursor-help">0</span>
                    </div>
                
                </div>
            </div>
        </div>

        <div id="result-block" class="display-0 mgy-4 bd-dark bd-2 bgr-dark-2 pd-2" target="editor-{uid}"></div>
        <div id="result-html" class="display-0 mgy-4 bd-dark bd-2 bgr-dark-2 pd-2" target="editor-{uid}"></div>

    
</div>

<script>

    $("#etext-font-color-trigger[editor-target=editor-{uid}]").click(() => {
        $("#dialog-text-color-input[editor-target=editor-{uid}]").trigger("click");

        $("#dialog-text-color-input[editor-target=editor-{uid}]").on("change", () => {

            var color_hex = $("#dialog-text-color-input[editor-target=editor-{uid}]").val();
            $("#etext-text-color-presentation[editor-target=editor-{uid}]").css("color", color_hex);
        });
        
    });

    $("#etext-font-bcolor-trigger[editor-target=editor-{uid}]").click(() => {
        $("#dialog-text-bcolor-input[editor-target=editor-{uid}]").trigger("click");

        $("#dialog-text-bcolor-input[editor-target=editor-{uid}]").on("change", () => {

            var color_hex = $("#dialog-text-bcolor-input[editor-target=editor-{uid}]").val();
            $("#etext-text-bcolor-presentation[editor-target=editor-{uid}]").css("color", color_hex);
        });
        
    });

    $("#toggleEditorBgr[target=editor-{uid}]").on("click", () => {
        var editor_area = $("#editor-{field_name}[target=editor-{uid}]");

        $("#toggleEditorBgr[target=editor-{uid}]").toggleClass("t-info","t-warning");
        if(editor_area.hasClass("bgr-{editor_sec_color}"))
        {
            editor_area.removeClass("bgr-{editor_sec_color}").addClass("bgr-light");
        }
        else
        {
            editor_area.removeClass("bgr-light").addClass("bgr-{editor_sec_color}");
        }
    });

    $(document).ready(() => {
        $.ajax({
            url: '/resources/plugins/etext/blockstyles/etext_styles.json',
            async: false,
            dataType: 'json',
            success: function (data) {
                for (const block of data.blocks) {
                    var block_option = "<option class='etext-block-style-"+block+" pd-1' value='block:"+block+"'>"+block+"</option>";
                    $("#etext-style-divs[editor-target=editor-{uid}]").append(block_option);
                }

                for (const span of data.spans) {
                    var span_option = "<option class='etext-span-style-"+span+" pd-1' value='span:"+span+"'>"+span+"</option>";
                    $("#etext-style-spans[editor-target=editor-{uid}]").append(span_option);
                }
            }
        });
    });
    
</script>